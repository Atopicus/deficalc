<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulario en Tiempo Real</title>
    <script defer src="https://unpkg.com/react@17/umd/react.development.js"></script>
    <script defer src="https://unpkg.com/react-dom@17/umd/react-dom.development.js"></script>
    <script defer src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="flex items-center justify-center h-screen bg-gray-100">
    <div id="root"></div>
    <script type="text/babel">
        function RealTimeForm() {
            const [a, setA] = React.useState("");
            const [b, setB] = React.useState("");
            const [d, setD] = React.useState("");
            const [e, setE] = React.useState("");
            
            // Convertir a números flotantes
            const numA = parseFloat(a) || 0;
            const numB = parseFloat(b) || 0;
            const numD = parseFloat(d) || 0;
            const numE = parseFloat(e) || 0;

            const c = numA && numB ? numA * numB : 0;
            const f = c > 0 ? (numD / c) * 100 : 0;
            const g = numD > 0 ? (c * numE) / (numD * 100) : 0;
            const h = c > 0 ? (c - (numD / (numE / 100))) / c : 0;
            const i = numA > 0 ? (c * (1 - h)) / numA : 0;

            // Función para validar decimales
            const handleDecimalChange = (setter) => (e) => {
                const value = e.target.value
                    .replace(/[^0-9.]/g, '') // Solo números y puntos
                    .replace(/(\..*)\./g, '$1'); // Solo un punto decimal
                setter(value);
            };

            return (
                <div className="max-w-lg mx-auto p-6 bg-white shadow-lg rounded-2xl">
                    <h2 className="text-xl font-semibold mb-4">Formulario en tiempo real</h2>
                    
                    <table className="w-full border-collapse border border-gray-300 text-left">
                        <thead>
                            <tr className="bg-gray-200">
                                <th className="border p-2">Parámetro</th>
                                <th className="border p-2">Valor</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td className="border p-2">Tokens colateral (a):</td>
                                <td className="border p-2">
                                    <input
                                        type="number"
                                        
                                        value={a}
                                        onChange={handleDecimalChange(setA)}
                                        className="w-full p-2 border rounded-lg"
                                        placeholder="0.00"
                                    />
                                </td>
                            </tr>
                            <tr>
                                <td className="border p-2">Precio token en USD (b):</td>
                                <td className="border p-2">
                                    <input
                                        type="number"
                                        inputMode="decimal"
                                        pattern="[0-9]*\.?[0-9]*"
                                        value={b}
                                        onChange={handleDecimalChange(setB)}
                                        className="w-full p-2 border rounded-lg"
                                        placeholder="0.00"
                                    />
                                </td>
                            </tr>
                            <tr>
                                <td className="border p-2">Valor deuda en USD (d):</td>
                                <td className="border p-2">
                                    <input
                                        type="number"
                                        inputMode="decimal"
                                        pattern="[0-9]*\.?[0-9]*"
                                        value={d}
                                        onChange={handleDecimalChange(setD)}
                                        className="w-full p-2 border rounded-lg"
                                        placeholder="0.00"
                                    />
                                </td>
                            </tr>
                            <tr>
                                <td className="border p-2">LTV % max (e):</td>
                                <td className="border p-2">
                                    <input
                                        type="number"
                                        inputMode="decimal"
                                        pattern="[0-9]*\.?[0-9]*"
                                        value={e}
                                        onChange={handleDecimalChange(setE)}
                                        className="w-full p-2 border rounded-lg"
                                        placeholder="0.00"
                                    />
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    
                    {/* ... (el resto de la tabla de resultados se mantiene igual) ... */}
                </div>
            );
        }
        
        ReactDOM.render(<RealTimeForm />, document.getElementById("root"));
    </script>
</body>
</html>
